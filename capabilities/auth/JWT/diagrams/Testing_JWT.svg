<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1114px" preserveAspectRatio="none" style="width:1396px;height:1114px;background:#FFFFFF;" version="1.1" viewBox="0 0 1396 1114" width="1396px" zoomAndPan="magnify"><title>Testing JWT &amp; org isolation (layers)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="257.0039" x="565.7678" y="28.5352">Testing JWT &amp; org isolation (layers)</text><g><title>Test Runner</title><rect fill="#000000" fill-opacity="0.00000" height="882.0059" width="8" x="44.9507" y="135.4648"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="48" x2="48" y1="135.4648" y2="1017.4707"/></g><g><title>Unit Tests</title><rect fill="#000000" fill-opacity="0.00000" height="882.0059" width="8" x="255.1211" y="135.4648"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="258.9893" x2="258.9893" y1="135.4648" y2="1017.4707"/></g><g><title>Integration Tests</title><rect fill="#000000" fill-opacity="0.00000" height="882.0059" width="8" x="550.3413" y="135.4648"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="553.7861" x2="553.7861" y1="135.4648" y2="1017.4707"/></g><g><title>E2E Tests</title><rect fill="#000000" fill-opacity="0.00000" height="882.0059" width="8" x="664.2065" y="135.4648"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="667.8965" x2="667.8965" y1="135.4648" y2="1017.4707"/></g><g><title>Mock Repos</title><rect fill="#000000" fill-opacity="0.00000" height="882.0059" width="8" x="775.686" y="135.4648"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="779.5166" x2="779.5166" y1="135.4648" y2="1017.4707"/></g><g><title>Real Adapter</title><rect fill="#000000" fill-opacity="0.00000" height="882.0059" width="8" x="898.1748" y="135.4648"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="901.8555" x2="901.8555" y1="135.4648" y2="1017.4707"/></g><g><title>HTTP App</title><rect fill="#000000" fill-opacity="0.00000" height="882.0059" width="8" x="1119.2124" y="135.4648"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1123.1357" x2="1123.1357" y1="135.4648" y2="1017.4707"/></g><g><title>Auth Utils</title><rect fill="#000000" fill-opacity="0.00000" height="882.0059" width="8" x="1318.1958" y="135.4648"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1321.8521" x2="1321.8521" y1="135.4648" y2="1017.4707"/></g><g class="participant participant-head" data-participant="VT"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.9014" x="5" y="116.0234">Test Runner</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.7148" x="22.0933" y="132.5117">(Vitest)</text><ellipse cx="48.9507" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.9507,58.9883 L48.9507,85.9883 M35.9507,66.9883 L61.9507,66.9883 M48.9507,85.9883 L35.9507,100.9883 M48.9507,85.9883 L61.9507,100.9883" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="VT"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.9014" x="5" y="1030.0059">Test Runner</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.7148" x="22.0933" y="1046.4941">(Vitest)</text><ellipse cx="48.9507" cy="1057.9473" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.9507,1065.9473 L48.9507,1092.9473 M35.9507,1073.9473 L61.9507,1073.9473 M48.9507,1092.9473 L35.9507,1107.9473 M48.9507,1092.9473 L61.9507,1107.9473" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="UT"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82.2637" x="217.9893" y="103.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.2637" x="224.9893" y="124.5117">Unit Tests</text></g><g class="participant participant-tail" data-participant="UT"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82.2637" x="217.9893" y="1016.4707"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.2637" x="224.9893" y="1037.0059">Unit Tests</text></g><g class="participant participant-head" data-participant="IT"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129.1104" x="489.7861" y="103.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.1104" x="496.7861" y="124.5117">Integration Tests</text></g><g class="participant participant-tail" data-participant="IT"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129.1104" x="489.7861" y="1016.4707"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.1104" x="496.7861" y="1037.0059">Integration Tests</text></g><g class="participant participant-head" data-participant="E2E"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78.6201" x="628.8965" y="103.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.6201" x="635.8965" y="124.5117">E2E Tests</text></g><g class="participant participant-tail" data-participant="E2E"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78.6201" x="628.8965" y="1016.4707"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.6201" x="635.8965" y="1037.0059">E2E Tests</text></g><g class="participant participant-head" data-participant="MOCK"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.3389" x="717.5166" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.6416" x="738.8652" y="108.0234">Mock Repos</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.3389" x="724.5166" y="124.5117">(@quub/testing)</text></g><g class="participant participant-tail" data-participant="MOCK"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.3389" x="717.5166" y="1016.4707"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.6416" x="738.8652" y="1037.0059">Mock Repos</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.3389" x="724.5166" y="1053.4941">(@quub/testing)</text></g><g class="participant participant-head" data-participant="ADP"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.6387" x="851.8555" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.6387" x="858.8555" y="108.0234">Real Adapter</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.5576" x="874.896" y="124.5117">(Prisma)</text></g><g class="participant participant-tail" data-participant="ADP"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.6387" x="851.8555" y="1016.4707"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.6387" x="858.8555" y="1037.0059">Real Adapter</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.5576" x="874.896" y="1053.4941">(Prisma)</text></g><g class="participant participant-head" data-participant="APP"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128.1533" x="1059.1357" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.4434" x="1089.4907" y="108.0234">HTTP App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.1533" x="1066.1357" y="124.5117">(Fastify instance)</text></g><g class="participant participant-tail" data-participant="APP"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128.1533" x="1059.1357" y="1016.4707"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.4434" x="1089.4907" y="1037.0059">HTTP App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.1533" x="1066.1357" y="1053.4941">(Fastify instance)</text></g><g class="participant participant-head" data-participant="AUTH"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.6875" x="1259.8521" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8691" x="1288.7612" y="108.0234">Auth Utils</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.6875" x="1266.8521" y="124.5117">(test JWT signer)</text></g><g class="participant participant-tail" data-participant="AUTH"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.6875" x="1259.8521" y="1016.4707"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8691" x="1288.7612" y="1037.0059">Auth Utils</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.6875" x="1266.8521" y="1053.4941">(test JWT signer)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1389.5396" x="0" y="166.1201"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1389.5396" y1="166.1201" y2="166.1201"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1389.5396" y1="169.1201" y2="169.1201"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="151.1792" x="619.1802" y="155.4648"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132.8945" x="625.1802" y="172.0332">Unit (handlers only)</text><g class="message" data-participant-1="VT" data-participant-2="UT"><polygon fill="#181818" points="247.1211,206.0859,257.1211,210.0859,247.1211,214.0859,251.1211,210.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9507" x2="253.1211" y1="210.0859" y2="210.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.1704" x="55.9507" y="205.3438">seedFaker(); make JWT claims</text></g><g class="message" data-participant-1="UT" data-participant-2="MOCK"><polygon fill="#181818" points="767.686,235.3965,777.686,239.3965,767.686,243.3965,771.686,239.3965" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="259.1211" x2="773.686" y1="239.3965" y2="239.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225.5703" x="266.1211" y="234.6543">new MockMarketRepository().reset()</text></g><g class="message" data-participant-1="UT" data-participant-2="UT"><line style="stroke:#181818;stroke-width:1;" x1="259.1211" x2="301.1211" y1="268.707" y2="268.707"/><line style="stroke:#181818;stroke-width:1;" x1="301.1211" x2="301.1211" y1="268.707" y2="281.707"/><line style="stroke:#181818;stroke-width:1;" x1="260.1211" x2="301.1211" y1="281.707" y2="281.707"/><polygon fill="#181818" points="270.1211,277.707,260.1211,281.707,270.1211,285.707,266.1211,281.707" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281.2202" x="266.1211" y="263.9648">call createMarket(repo, orgId='ORG_A', data)</text></g><g class="message" data-participant-1="UT" data-participant-2="MOCK"><polygon fill="#181818" points="767.686,307.0176,777.686,311.0176,767.686,315.0176,771.686,311.0176" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="259.1211" x2="773.686" y1="311.0176" y2="311.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235.7773" x="266.1211" y="306.2754">repo assertions (defaults, pagination)</text></g><g class="message" data-participant-1="MOCK" data-participant-2="UT"><polygon fill="#181818" points="270.1211,351.6387,260.1211,355.6387,270.1211,359.6387,266.1211,355.6387" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="264.1211" x2="778.686" y1="355.6387" y2="355.6387"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.5859" x="276.1211" y="335.5859">OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.1084" x="276.1211" y="350.8965">(invariants hold)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1389.5396" x="0" y="384.2939"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1389.5396" y1="384.2939" y2="384.2939"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1389.5396" y1="387.2939" y2="387.2939"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="304.0371" x="542.7512" y="373.6387"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="285.7524" x="548.7512" y="390.207">Integration (route -&gt; handler, no network)</text><g class="message" data-participant-1="VT" data-participant-2="IT"><polygon fill="#181818" points="542.3413,424.2598,552.3413,428.2598,542.3413,432.2598,546.3413,428.2598" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9507" x2="548.3413" y1="428.2598" y2="428.2598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.4297" x="55.9507" y="423.5176">buildApp({deps: MOCK})</text></g><g class="message" data-participant-1="IT" data-participant-2="AUTH"><polygon fill="#181818" points="1310.1958,453.5703,1320.1958,457.5703,1310.1958,461.5703,1314.1958,457.5703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="554.3413" x2="1316.1958" y1="457.5703" y2="457.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.394" x="561.3413" y="452.8281">signTestJWT({orgId:'ORG_A'})</text></g><g class="message" data-participant-1="IT" data-participant-2="APP"><polygon fill="#181818" points="1111.2124,513.502,1121.2124,517.502,1111.2124,521.502,1115.2124,517.502" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="554.3413" x2="1117.2124" y1="517.502" y2="517.502"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217.915" x="561.3413" y="482.1387">inject POST /orgs/ORG_A/markets</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.5078" x="561.3413" y="497.4492">Authorization: Bearer &lt;JWT&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.0469" x="561.3413" y="512.7598">Body: {symbol:"AAPL", ...}</text></g><g class="message" data-participant-1="APP" data-participant-2="APP"><line style="stroke:#181818;stroke-width:1;" x1="1123.2124" x2="1165.2124" y1="577.4336" y2="577.4336"/><line style="stroke:#181818;stroke-width:1;" x1="1165.2124" x2="1165.2124" y1="577.4336" y2="590.4336"/><line style="stroke:#181818;stroke-width:1;" x1="1124.2124" x2="1165.2124" y1="590.4336" y2="590.4336"/><polygon fill="#181818" points="1134.2124,586.4336,1124.2124,590.4336,1134.2124,594.4336,1130.2124,590.4336" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.9834" x="1130.2124" y="542.0703">Zod validates body (no orgId)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.1646" x="1130.2124" y="557.3809">Auth middleware verifies JWT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.3408" x="1130.2124" y="572.6914">URL orgId == JWT orgId</text></g><g class="message" data-participant-1="APP" data-participant-2="MOCK"><polygon fill="#181818" points="790.686,615.7441,780.686,619.7441,790.686,623.7441,786.686,619.7441" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="784.686" x2="1122.2124" y1="619.7441" y2="619.7441"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.5259" x="796.686" y="615.002">repo.create({... , orgId:'ORG_A'})</text></g><g class="message" data-participant-1="APP" data-participant-2="IT"><polygon fill="#181818" points="565.3413,645.0547,555.3413,649.0547,565.3413,653.0547,561.3413,649.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="559.3413" x2="1122.2124" y1="649.0547" y2="649.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.7969" x="571.3413" y="644.3125">201 Created</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1389.5396" x="0" y="677.71"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1389.5396" y1="677.71" y2="677.71"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1389.5396" y1="680.71" y2="680.71"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="119.1172" x="635.2112" y="667.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="100.8325" x="641.2112" y="683.623">E2E (full HTTP)</text><g class="message" data-participant-1="VT" data-participant-2="E2E"><polygon fill="#181818" points="656.2065,717.6758,666.2065,721.6758,656.2065,725.6758,660.2065,721.6758" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9507" x2="662.2065" y1="721.6758" y2="721.6758"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.041" x="55.9507" y="716.9336">start Fastify with real plugins</text></g><g class="message" data-participant-1="E2E" data-participant-2="AUTH"><polygon fill="#181818" points="1310.1958,746.9863,1320.1958,750.9863,1310.1958,754.9863,1314.1958,750.9863" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="668.2065" x2="1316.1958" y1="750.9863" y2="750.9863"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.394" x="675.2065" y="746.2441">signTestJWT({orgId:'ORG_A'})</text></g><g class="message" data-participant-1="E2E" data-participant-2="APP"><polygon fill="#181818" points="1111.2124,776.2969,1121.2124,780.2969,1111.2124,784.2969,1115.2124,780.2969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="668.2065" x2="1117.2124" y1="780.2969" y2="780.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.6401" x="675.2065" y="775.5547">real HTTP injects or supertest</text></g><g class="message" data-participant-1="APP" data-participant-2="ADP"><polygon fill="#181818" points="913.1748,805.6074,903.1748,809.6074,913.1748,813.6074,909.1748,809.6074" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="907.1748" x2="1122.2124" y1="809.6074" y2="809.6074"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.0376" x="919.1748" y="804.8652">optional DB/Prisma (or test DB)</text></g><g class="message" data-participant-1="APP" data-participant-2="E2E"><polygon fill="#181818" points="679.2065,834.918,669.2065,838.918,679.2065,842.918,675.2065,838.918" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="673.2065" x2="1122.2124" y1="838.918" y2="838.918"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.8916" x="685.2065" y="834.1758">2xx/4xx as spec</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1389.5396" x="0" y="867.5732"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1389.5396" y1="867.5732" y2="867.5732"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1389.5396" y1="870.5732" y2="870.5732"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="244.8008" x="572.3694" y="856.918"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="226.5161" x="578.3694" y="873.4863">Contract tests (mocks match real)</text><g class="message" data-participant-1="VT" data-participant-2="ADP"><polygon fill="#181818" points="890.1748,907.5391,900.1748,911.5391,890.1748,915.5391,894.1748,911.5391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9507" x2="896.1748" y1="911.5391" y2="911.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226.751" x="55.9507" y="906.7969">run shared repository contract suite</text></g><g class="message" data-participant-1="VT" data-participant-2="MOCK"><polygon fill="#181818" points="767.686,936.8496,777.686,940.8496,767.686,944.8496,771.686,940.8496" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9507" x2="773.686" y1="940.8496" y2="940.8496"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212.7227" x="55.9507" y="936.1074">run the same suite against mocks</text></g><g class="message" data-participant-1="ADP" data-participant-2="VT"><polygon fill="#181818" points="59.9507,966.1602,49.9507,970.1602,59.9507,974.1602,55.9507,970.1602" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.9507" x2="901.1748" y1="970.1602" y2="970.1602"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.2104" x="65.9507" y="965.418">must pass the same behaviors</text></g><g class="message" data-participant-1="MOCK" data-participant-2="VT"><polygon fill="#181818" points="59.9507,995.4707,49.9507,999.4707,59.9507,1003.4707,55.9507,999.4707" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.9507" x2="778.686" y1="999.4707" y2="999.4707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.2104" x="65.9507" y="994.7285">must pass the same behaviors</text></g><!--SRC=[ZLHDRnen4BtlhnXnQ7Ob0ctK4mrH8IGDJI8GNLAfYbIPNGDklFRMzl9HbF_UyNX988UgDyoy-NZlpQmJJd98kNL2BU3hznJUWJOB45PBveHM44ksvSOcKSGofmqqF1WcbLBSFAhuGJXy9mrW5XxIg6J6YKoKJ3beJ9LmLDjIUFecF5IEBqpeyeeQla5TdLqTHF5r7BxNsHDCUAaj3lFvTrNDsYwm2JFTZovlZpCcd4devQnqH61iX2rO0FS6usFiJPgEeLUMYBjcM7M-1Q6iOohZTSRuJKQlSakOEY7zF7uI4jMA1SfLfqpJcoZgTe7aYPTCvH851gtaDe5kDtf8uVG2rO8EMCxpQ_R4JPnyWW9_KBLCCb7OQ4euJn2HYg_1Qt7Fp1Dt98X0kxPnqZBSSXSdDPxgPanAo0ndZeU4s616qri_pBideycNdxsJ9kJCiUIuZySX2ykDzyr2dFCvgwIpJIZPGYYoatBEJq_tIQDR54Ee5JC2HRAmr39FI8F37OYDhXptlMfDcg0q4dDhRPuEb1bw1hDAo1oTYNSvBss7EZqdqP0GNcAl7ghkLmSrYtT4hLDJUqMEnmWKwXVF78n7tr9e8z2s2TOkI1jqqhkgZVX3WtQWpvdX1iwnyCMZwkjysu6TtHOpBJkDNczyrsX2gzLwZdpvbou_T0uh9WMgoYtCC0jY94Y39Q475297vcii3ojkn5mW4hiygkdaBY1H1re2UkmR79ZJ2hR6Enm0QaUFQNjZmaHdxp_09S5pSiFVMZolS3VyuXz8xWEefyDDX_qXh0NEQ_mnbR92vstaKV-f_XvAOr0HEhLW1Dw20LkLk6EO_oBYm6DrwIr0_A3V3gSBCQBfqWRzKFY0u6RJ_hZP-BEp9S-8vALMpk2tZ79mWGky6el7vR90vu1sQ6ag1NQ9bkGaSBWhoFPbR8MVm3fXxmDck2K7omeUui0Mp7yvWBfvD0r9zOiA_o_nfbvpPdp9LaAR5sHT-5_Glm00]--></g></svg>